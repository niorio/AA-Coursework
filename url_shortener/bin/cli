require 'launchy'


  puts "Enter your email:"
  email = gets.chomp

  user = User.find_by(email: email)

  puts "0. Create shortened URL \n1. Visit shortened URL"
  choice = gets.chomp
  case choice
  when "0"
    puts "Type in your long URL:"
    long_url = gets.chomp
    short = ShortenedUrl.create_for_user_and_long_url!(user, long_url)

    puts "Short URL is #{short.short_url}"

  when "1"
    puts "Type in your short URL:"
    short_url = gets.chomp
    url = ShortenedUrl.find_by(short_url: short_url)
    orig_url = url.long_url

    Launchy.open(orig_url)
    Visit.record_visit!(user, url)

  end
